---
export const prerender = true;
import t from "../../i18n/es";
import { inject } from "@vercel/analytics";
inject();

---

<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VXGear â€“ Feel the Road</title>

    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />

    <style>
      body { font-family: 'Inter', sans-serif; margin: 0; }
      #fadeCarousel img {
        position: absolute; inset: 0; width: 100%; height: 100%;
        object-fit: cover; opacity: 0; transition: opacity 1.5s ease-in-out;
      }
      #fadeCarousel img.active { opacity: 1; }

      #mobileCarousel img {
        position: absolute; inset: 0; width: 100%; height: 100%;
        object-fit: cover; opacity: 0; transition: opacity 1.5s ease-in-out;
      }
      #mobileCarousel img.active { opacity: 1; }      
    </style>
  </head>

  <body class="bg-[#0F0F0F] text-white">
    <main class="grid grid-cols-1 lg:grid-cols-2 min-h-screen">

      <!-- LEFT -->
      <div class="px-8 lg:px-24 py-12 flex flex-col">

      <!-- LANG SWITCHER -->
      <div class="flex justify-end mb-2 -mt-6 lg:mb-10 lg:-mt-6">
        <nav class="flex gap-4 text-sm text-white/70">
          <a href="/es/" class="hover:text-white">ES</a>
          <a href="/en/" class="hover:text-white">EN</a>
        </nav>
      </div>

        <!-- LOGO -->
        <div class="flex flex-col items-center justify-center mb-1 -mt-3 lg:items-start lg:flex-row">
          <img src="/img/logo.png" alt="VXGear Logo" class="h-24 w-auto object-contain md:h-40" />
        </div>

        <!-- MOBILE CAROUSEL -->
        <div class="block lg:hidden relative w-full h-[38vh] sm:h-[42vh] overflow-hidden -mt-2 mb-4">
          <div id="mobileCarousel" class="absolute inset-0">
            <img src="/img/slide_01.jpg" class="active" />
            <img src="/img/slide_02.jpg" />
            <img src="/img/slide_03.jpg" />
            <img src="/img/slide_04.jpg" />
          </div>
        </div>


        <!-- BADGE -->
        <div class="flex items-center gap-2 w-fit rounded-full 
            border border-white/10 bg-white/5 
            px-3 py-1 text-xs uppercase tracking-wide text-white/70">
            <span class="h-1.5 w-1.5 rounded-full bg-emerald-400"></span>
            Lanzamiento 1T 2026
        </div>

        <!-- DYNAMIC TITLE -->
        <h1 id="dynamicTitle" class="text-3xl md:text-6xl font-semibold leading-tight mt-6"></h1>

        <script>
          document.addEventListener("DOMContentLoaded", () => {
            const phrases = [
              "El equipamiento perfecto para tu moto.",
              "Selecciones para motoristas exigentes.",
              "Estilo y seguridad en perfecta armonÃ­a.",
              "Tu carretera, tu estilo, tu equipaciÃ³n.",
              "Conduce mejor. Viste mejor.",
              "EquipaciÃ³n hecha para tu forma de conducir."
            ];

            const randomPhrase = phrases[Math.floor(Math.random() * phrases.length)];

            document.getElementById("dynamicTitle").innerHTML =
              randomPhrase.replace(
                /equipamiento|Selecciones|motoristas|estilo|seguridad|carretera|mejor|conducir|equipaciÃ³n/gi,
                (match) => `<span class="text-[#B79A29]">${match}</span>`
              );
          });
        </script>

        <p class="text-white/60 mt-4 w-full">
          VXGear13 usa IA para analizar tu estilo, tu moto y las condiciones de la carretera y recomendar chaquetas, cascos, guantes y accesorios que realmente encajan contigo.
        </p>

        <p class="text-[#d1ccb8] mt-4 mb-3 w-full">
          SÃ© el primero en enterarte. Ãšnete a VXGear y te avisaremos en cuanto la app estÃ© disponible.
        </p>

        <!-- EMAIL FORM -->
        <form id="waitlistForm" class="flex mt-1 max-w-lg">
          <input type="hidden" name="lang" value="es" />
          <input
            id="emailInput"
            type="email"
            name="email"
            required
            placeholder="Introduce tu email"
            class="flex-1 border border-white/20 bg-white/10 text-white rounded-l-xl px-4 py-3 outline-none placeholder-white/50"
          />
          <button
            id="submitBtn"
            type="submit"
            class="bg-[#B79A29] text-black font-semibold px-6 py-3 rounded-r-xl hover:bg-[#d8b643] transition"
          >
            Ãšnete ya
          </button>
        </form>

        <p id="feedbackMsg" class="text-sm mt-3 opacity-0 transition-all duration-300"></p>

        <script>
          const form = document.getElementById("waitlistForm");
          const emailInput = document.getElementById("emailInput");
          const submitBtn = document.getElementById("submitBtn");
          const msg = document.getElementById("feedbackMsg");

          // ðŸ”¥ Ejecutar contador al cargar la pÃ¡gina
          document.addEventListener("DOMContentLoaded", updateCount);

          form.addEventListener("submit", async (e) => {
            e.preventDefault();

            submitBtn.innerText = "Enviando...";
            submitBtn.disabled = true;
            submitBtn.classList.add("opacity-70");

            // Enviar todo el formulario (email + lang)
            const body = new FormData(form);

            try {
              const res = await fetch("/api/subscribe", {
                method: "POST",
                body,
              });

              let data = null;
              try {
                data = await res.json();
              } catch {
                data = null;
              }

              if (res.ok && data?.success) {
                msg.innerText = "Â¡EstÃ¡s dentro! Bienvenido a VXGear.";
                msg.className = "text-green-400 text-sm mt-3 opacity-100";
                form.reset();

                // ðŸ”¥ Actualizar contador despuÃ©s de registrar email
                await updateCount();

              } else {
                msg.innerText = "Algo ha fallado. IntÃ©ntalo de nuevo.";
                msg.className = "text-red-400 text-sm mt-3 opacity-100";
              }

            } catch (err) {
              msg.innerText = "Algo ha fallado. IntÃ©ntalo de nuevo.";
              msg.className = "text-red-400 text-sm mt-3 opacity-100";
            }

            submitBtn.innerText = "Ãšnete ahora";
            submitBtn.disabled = false;
            submitBtn.classList.remove("opacity-70");
          });

          // ðŸ“© FunciÃ³n que actualiza el contador
          async function updateCount() {
            try {
              const res = await fetch("/api/count");
              const data = await res.json();

              const countEl = document.getElementById("emailCounter");
              if (countEl) {
                countEl.textContent = `ðŸ‘¥ ${data.total} motoristas ya se han unido`;
              }
            } catch (err) {
              console.error("Error al actualizar contador:", err);
            }
          }
        </script>



        <!-- AVATARS -->
        <div class="flex items-center gap-3 mt-6">
          <div class="flex -space-x-3">
            <img src="/img/avatar/avatar1.png" class="h-9 w-9 rounded-full border border-black shadow" />
            <img src="/img/avatar/avatar2.png" class="h-9 w-9 rounded-full border border-black shadow" />
            <img src="/img/avatar/avatar3.png" class="h-9 w-9 rounded-full border border-black shadow" />
            <img src="/img/avatar/avatar4.png" class="h-9 w-9 rounded-full border border-black shadow" />
            <img src="/img/avatar/avatar5.png" class="h-9 w-9 rounded-full border border-black shadow" />
          </div>

          <p id="emailCounter" class="text-sm text-white/70 translate-y-[1px]">

          <script>
            document.addEventListener("DOMContentLoaded", () => {
              fetch("/api/count")
                .then(res => res.json())
                .then(data => {
                  document.getElementById("emailCounter").textContent =
                    `ðŸ‘¥ ${data.total} motoristas ya se han unido!`;
                })
                .catch(() => {});
            });
          </script>
        </p>

        </div>

        <!-- FOOTER -->
        <footer class="mt-32 text-xs text-white/40">
          {t.footer1}<br />{t.footer2}


        </footer>
      </div>

      <!-- RIGHT SIDE CAROUSEL -->
      <div class="hidden lg:block relative w-full h-[45vh] sm:h-[55vh] md:h-screen overflow-hidden">
        <div id="fadeCarousel" class="absolute inset-0">
          <img src="/img/slide_01.jpg" class="active" />
          <img src="/img/slide_02.jpg" />
          <img src="/img/slide_03.jpg" />
          <img src="/img/slide_04.jpg" />          
        </div>
      </div>

    </main>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const imgs = document.querySelectorAll("#fadeCarousel img");
        let index = 0;
        setInterval(() => {
          imgs[index].classList.remove("active");
          index = (index + 1) % imgs.length;
          imgs[index].classList.add("active");
        }, 3800);
      });
    </script>

    <script>
      document.addEventListener("DOMContentLoaded", () => {
        const images = document.querySelectorAll("#mobileCarousel img");
        let index = 0;

        setInterval(() => {
          images[index].classList.remove("active");
          index = (index + 1) % images.length;
          images[index].classList.add("active");
        }, 3800);
      });
    </script>
    
    <script defer src="https://cloud.umami.is/script.js" data-website-id="d7a9ed2d-2e4d-427e-aa15-2a38853d4650"></script>
    
  </body>
</html>
